<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>社員登録 - 社員管理システム</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 30px;
        }
        
        h1 {
            color: #333;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 3px solid #007bff;
        }
        
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #007bff;
            text-decoration: none;
            font-size: 0.9em;
        }
        
        .back-link:hover {
            text-decoration: underline;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #555;
        }
        
        .form-label .required {
            color: #dc3545;
            margin-left: 4px;
        }
        
        .form-control {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1em;
            transition: border-color 0.3s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
        }
        
        .form-control.is-invalid {
            border-color: #dc3545;
        }
        
        .invalid-feedback {
            color: #dc3545;
            font-size: 0.9em;
            margin-top: 5px;
            display: block;
        }
        
        .form-row {
            display: flex;
            gap: 20px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .form-buttons {
            display: flex;
            gap: 10px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            font-size: 1em;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn-primary {
            background-color: #007bff;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #0056b3;
        }
        
        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #545b62;
        }
        
        .help-text {
            font-size: 0.85em;
            color: #666;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="/employees" class="back-link">← 社員一覧に戻る</a>
    
        <h1 th:text="${isEdit} ? '社員編集' : '社員登録'">社員登録</h1>
        
        <form method="post" 
      th:action="${isEdit} ? '/employees/' + ${employeeId} : '/employees'" 
      th:object="${employeeForm}">
            
            <!-- 姓・名 -->
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="lastName">
                        姓<span class="required">*</span>
                    </label>
                    <input type="text" 
                           id="lastName" 
                           th:field="*{lastName}"
                           class="form-control"
                           th:classappend="${#fields.hasErrors('lastName')} ? 'is-invalid' : ''"
                           placeholder="山田">
                    <span class="invalid-feedback" th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}">
                        エラーメッセージ
                    </span>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="firstName">
                        名<span class="required">*</span>
                    </label>
                    <input type="text" 
                           id="firstName" 
                           th:field="*{firstName}"
                           class="form-control"
                           th:classappend="${#fields.hasErrors('firstName')} ? 'is-invalid' : ''"
                           placeholder="太郎">
                    <span class="invalid-feedback" th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}">
                        エラーメッセージ
                    </span>
                </div>
            </div>
            
            <!-- メールアドレス -->
            <div class="form-group">
                <label class="form-label" for="email">
                    メールアドレス<span class="required">*</span>
                </label>
                <input type="email" 
                       id="email" 
                       th:field="*{email}"
                       class="form-control"
                       th:classappend="${#fields.hasErrors('email')} ? 'is-invalid' : ''"
                       placeholder="yamada.taro@example.com">
                <span class="invalid-feedback" th:if="${#fields.hasErrors('email')}" th:errors="*{email}">
                    エラーメッセージ
                </span>
            </div>
            
            <!-- 部署 -->
            <div class="form-group">
                <label class="form-label" for="departmentId">
                    部署<span class="required">*</span>
                </label>
                <select id="departmentId" 
                        th:field="*{departmentId}"
                        class="form-control"
                        th:classappend="${#fields.hasErrors('departmentId')} ? 'is-invalid' : ''">
                    <option value="">選択してください</option>
                    <option th:each="dept : ${departments}" 
                            th:value="${dept.departmentId}"
                            th:text="${dept.departmentName}">
                        営業部
                    </option>
                </select>
                <span class="invalid-feedback" th:if="${#fields.hasErrors('departmentId')}" th:errors="*{departmentId}">
                    エラーメッセージ
                </span>
            </div>
            
            <!-- 入社日 -->
<div class="form-group">
    <label class="form-label" for="hireDate">
        入社日<span class="required">*</span>
    </label>
    <input type="date" 
           id="hireDate" 
           th:field="*{hireDate}"
           class="form-control"
           th:classappend="${#fields.hasErrors('hireDate')} ? 'is-invalid' : ''">
    <div class="help-text">過去または現在の日付を入力してください</div>
    <span class="invalid-feedback" th:if="${#fields.hasErrors('hireDate')}" th:errors="*{hireDate}">
        エラーメッセージ
    </span>
</div>
            
            <!-- 給与 -->
            <div class="form-group">
                <label class="form-label" for="salary">
                    給与<span class="required">*</span>
                </label>
                <input type="number" 
                       id="salary" 
                       th:field="*{salary}"
                       class="form-control"
                       th:classappend="${#fields.hasErrors('salary')} ? 'is-invalid' : ''"
                       placeholder="350000"
                       step="1000">
                       <div class="help-text">100,000円〜2,000,000円の範囲で入力してください（例: 350000）</div>
                <span class="invalid-feedback" th:if="${#fields.hasErrors('salary')}" th:errors="*{salary}">
                    エラーメッセージ
                </span>
            </div>
            
            <!-- 在籍状況 -->
            <div class="form-group">
                <label class="form-label" for="status">
                    在籍状況<span class="required">*</span>
                </label>
                <select id="status" 
                        th:field="*{status}"
                        class="form-control"
                        th:classappend="${#fields.hasErrors('status')} ? 'is-invalid' : ''">
                    <option value="在籍中">在籍中</option>
                    <option value="退職済">退職済</option>
                </select>
                <span class="invalid-feedback" th:if="${#fields.hasErrors('status')}" th:errors="*{status}">
                    エラーメッセージ
                </span>
            </div>
            
            <!-- ボタン -->
            <div class="form-buttons">
                <button type="submit" class="btn btn-primary" th:text="${isEdit} ? '更新' : '登録'">登録</button>
                <a href="/employees" class="btn btn-secondary">キャンセル</a>
            </div>
        </form>
    </div>
</body>
</html>